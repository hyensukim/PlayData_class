# 3. ìŠ¤í”„ë§ ë””ìŠ¤ì»¤ë²„ë¦¬ ìœ ë ˆì¹´ ì„œë²„

ìŠ¤í”„ë§ í´ë¼ìš°ë“œì—ì„œ ì œê³µí•˜ëŠ” EurekaëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œ ì„œë¹„ìŠ¤ì˜ ë“±ë¡, ë°œê²¬, ë° ê´€ë¦¬ë¥¼ ìœ„í•œ ì„œë¹„ìŠ¤ [ë””ìŠ¤ì»¤ë²„ë¦¬ ì„œë²„](https://github.com/hyensukim/PlayData_class/blob/main/class/%EC%96%B8%EC%96%B4%20%EC%84%A4%EB%AA%85/%EB%94%94%EC%8A%A4%EC%BB%A4%EB%B2%84%EB%A6%AC.md "ì„¤ëª…")ì´ë‹¤. ì´ë¥¼ í†µí•´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì´ íš¨ìœ¨ì ìœ¼ë¡œ ì´ë¤„ì§ˆ ìˆ˜ ìˆë‹¤.

### ìš°ì„  ì„¤ëª…í•˜ê¸°ì— ì•ì„œ, Spring-cloud Eurekaë€ ë¬´ì—‡ì¼ê¹Œ?

ìŠ¤í”„ë§ í´ë¼ìš°ë“œì—ì„œ ì œê³µí•œ APIë¥¼ ì°¸ê³ í•˜ì—¬ ê° ê¸°ì—…ë§ˆë‹¤ êµ¬í˜„í•œ ì½”ë“œë¡œì¨, Open sourceì˜ ì´ì ì„ í™œìš©í•˜ê¸° ìœ„í•´ Spring Cloudì— ê¸°ë¶€í•œ êµ¬í˜„ ì½”ë“œì´ë‹¤.

ê·¸ ì¤‘ í•˜ë‚˜ê°€ Spring-cloud Eurekaì´ë‹¤.

EurekaëŠ” 2ê°€ì§€ë¡œ ë¶„ë¥˜ë˜ëŠ”ë°, Eureka Serverì™€ Eureka Discovery Clientë¡œ êµ¬ë¶„ëœë‹¤.

- Eureka Server : ë””ìŠ¤ì»¤ë²„ë¦¬ ì„œë²„ë¡œì„œ, ë¡œë“œ ë°¸ëŸ°ì‹±ê³¼ í—¬ìŠ¤ ì²´í¬ ê¸°ëŠ¥ì„ í•œë‹¤.
- Eureka Discovery Client : ìœ ë ˆì¹´ ì„œë²„ë¡œ ë¶€í„° ê´€ë¦¬ë  ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë“¤ì„ ì˜ë¯¸í•œë‹¤.

### ë””ìŠ¤ì»¤ë²„ë¦¬ ì„œë²„ê°€ í•„ìš”í•œ ì´ìœ ?

![img](https://raw.githubusercontent.com/hyensukim/PlayData_class/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%9A%94%EC%B2%AD%20%EA%B7%B8%EB%A6%BC.png)

ê²Œì´íŠ¸ì›¨ì´ ì„œë²„ë¡œë§Œ ì‚¬ìš©í•  ê²½ìš°, ë¡œë“œ ë°¸ëŸ°ì‹±ì´ë‚˜ í—¬ìŠ¤ ì²´í¬ê¹Œì§€ í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìˆì–´, ì´ë¥¼ í• ë‹¹í•œ ë””ìŠ¤ì»¤ë²„ë¦¬ ì„œë²„ë¡œ ë¡œë“œ ë°¸ëŸ°ì‹± ë° í—¬ìŠ¤ ì²´í¬ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ë„ë¡ í•œë‹¤.

## ğŸ‡ Spring cloud Eureka

### ì£¼ìš” íŠ¹ì§• :

- ì„œë¹„ìŠ¤ ë“±ë¡(Service Registration) : ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ Eureka ì„œë²„ì— ìì‹ ì˜ ìœ„ì¹˜ ì •ë³´ë¥¼ ë“±ë¡í•œë‹¤. ì´ë¥¼ í†µí•´ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë‚˜ í´ë¼ì´ì–¸íŠ¸ê°€ í•´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.
- ì„œë¹„ìŠ¤ ê°ì§€(Service Discovery) : Eureka í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬, ì„œë¹„ìŠ¤ë¥¼ ì°¾ê³  í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ ë™ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ì˜ ìœ„ì¹˜ íŒŒì•…ì´ ê°€ëŠ¥í•˜ë‹¤.
- ì„œë¹„ìŠ¤ ìƒíƒœ ê°ì‹œ(Health Monitoring) : EurekaëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ë“±ë¡ëœ ì„œë¹„ìŠ¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•œë‹¤. ì´ë¥¼ í†µí•´ ì¥ì• ê°€ ë°œìƒí•œ ì„œë¹„ìŠ¤ë¥¼ ê°ì§€í•˜ê³  ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¡œ ìš”ì²­ì„ ë¼ìš°íŒ…í•  ìˆ˜ ìˆë‹¤.
- ë™ì  ì„œë¹„ìŠ¤ ë³€ê²½(Dynamic Service Changes) : ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¶”ê°€ë˜ê±°ë‚˜ ê¸°ì¡´ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ì œê±°ë˜ì–´ë„ EurekaëŠ” ì´ë¥¼ ê°ì§€í•˜ê³  ì„œë¹„ìŠ¤ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¡œë“œ ë°¸ëŸ°ì‹±(Client-Side Load Balancing) : ìœ ë ˆì¹´ í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ì„œë¹„ìŠ¤ë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ”ë°, ì´ë¥¼ í†µí•´ ë¶€í•˜ë¥¼ ë¶„ì‚°í•œë‹¤.

### ì‘ë™ ì›ë¦¬ :

1. Eureka ì„œë²„ êµ¬ë™ : ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©í•  Eureka ì„œë²„ë¥¼ ì‹¤í–‰. ì´ëŠ” ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì˜ ì¤‘ì‹¬ ì—­í• ì„ í•œë‹¤.
2. ì„œë¹„ìŠ¤ ë“±ë¡ : ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ì‹œì‘ë  ë•Œ, í•´ë‹¹ ì„œë¹„ìŠ¤ëŠ” Eureka ì„œë²„ì— ìì‹ ì˜ ì •ë³´ë¥¼ ë“±ë¡í•œë‹¤. ì´ ì •ë³´ì—ëŠ” ì„œë¹„ìŠ¤ì˜ ì´ë¦„, IP ì£¼ì†Œ, í¬íŠ¸ ë²ˆí˜¸ ë“±ì˜ ì •ë³´ê°€ í¬í•¨ëœë‹¤.
3. ì„œë¹„ìŠ¤ ê°ì§€ : ë‹¤ë¥¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë‚˜ í´ë¼ì´ì–¸íŠ¸ê°€ íŠ¹ì • ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ì„œëŠ” Eureka í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ Eureka ì„œë²„ì—ì„œ í•´ë‹¹ ì„œë¹„ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤.
4. ì„œë¹„ìŠ¤ ì‚¬ìš© : í´ë¼ì´ì–¸íŠ¸ëŠ” Eurekaë¡œë¶€í„° ë°›ì€ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ëª©ë¡ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. ì´ë•Œ, í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ í†µí•´ ë¶€í•˜ê°€ ê³ ë¥´ê²Œ ë¶„ì‚°ëœë‹¤.
5. ì„œë¹„ìŠ¤ ìƒíƒœ ê°ì‹œ : Eureka ì„œë²„ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ë“±ë¡ëœ ì„œë¹„ìŠ¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•œë‹¤. ë§Œì•½ ì„œë¹„ìŠ¤ê°€ ì‘ë‹µí•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤.
6. ë™ì  ì„œë¹„ìŠ¤ ë³€ê²½ : ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¶”ê°€ë˜ê±°ë‚˜ ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ê°€ ì œê±°ë˜ë©´, EurekaëŠ” ì´ë¥¼ ê°ì§€í•˜ê³  ì„œë¹„ìŠ¤ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•œë‹¤.

### Eureka ì„œë²„ ì„¤ì • :

```
server : 
	port : 8761
eureka: 
	client:
		register-with-eureka: false
		fetch-registry: false

```

ìœ„ ì„¤ì •ì€ Eureka ì„œë²„ë¥¼ 8761 í¬íŠ¸ë¡œ ì‹¤í–‰í•˜ë©°, ì„œë¹„ìŠ¤ ë“±ë¡ ë° ì„œë¹„ìŠ¤ ëª©ë¡ ì¡°íšŒë¥¼ ìœ„í•œ ì„¤ì •ì´ë‹¤.

`register-with-eureka`, `fetch-registry` ë¥¼ falseë¡œ ì„¤ì •í•˜ì—¬ í•´ë‹¹ ì„œë²„ëŠ” ìì‹ ì„ ë“±ë¡í•˜ì§€ ì•Šê³ , ë“±ë¡ëœ ì„œë¹„ìŠ¤ ëª©ë¡ì„ ê°€ì ¸ì˜¤ì§€ ì•Šë„ë¡ ì„¤ì •í–ˆë‹¤.

### ìš”ì•½ :

Spring cloud EurekaëŠ” ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤. ì„œë¹„ìŠ¤ ë“±ë¡, ê°ì§€, ìƒíƒœ ëª¨ë‹ˆí„°ë§ ë“±ì„ í†µí•´ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ì˜ íš¨ìœ¨ì ì¸ í†µì‹ ì„ ê°€ëŠ¥í•˜ë„ë¡ í•´ì¤€ë‹¤.

### ì‹¤ìŠµí•˜ê¸°

í”„ë¡œì íŠ¸ ìƒì„± ì‹œ ë””ìŠ¤ì»¤ë²„ë¦¬ ìœ ë ˆì¹´ ì„œë²„ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.

![ìœ ë ˆì¹´ ì‹¤ìŠµ1](https://raw.githubusercontent.com/hyensukim/PlayData_class/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%8B%A4%EC%8A%B51.png)

ê·¸ ë‹¤ìŒìœ¼ë¡œ ServerApplication ì— @EnableEurekaServer ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì¤€ë‹¤.

![ìœ ë ˆì¹´ ì‹¤ìŠµ2](https://raw.githubusercontent.com/hyensukim/PlayData_class/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%8B%A4%EC%8A%B52.png)

ë§ˆì§€ë§‰ìœ¼ë¡œ, application.yml íŒŒì¼ì— discovery-server ê´€ë ¨ ì„¤ì •ì„ ì¶”ê°€í•´ì¤€ë‹¤.

![ìœ ë ˆì¹´ ì‹¤ìŠµ3](https://raw.githubusercontent.com/hyensukim/PlayData_class/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%8B%A4%EC%8A%B53.png)

### Eureka ì„œë²„ì— ì„œë¹„ìŠ¤ ë“±ë¡í•˜ê³  í™•ì¸í•˜ê¸°

ìœ ë ˆì¹´ ì„œë²„ì— ë“±ë¡í•  ì„œë¹„ìŠ¤ëŠ” Eureka Discovery Client ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤˜ì•¼ í•œë‹¤.

![ìœ ë ˆì¹´ í´ë¼ì´ì–¸íŠ¸ ì‹¤ìŠµ1](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%20%EC%8B%A4%EC%8A%B51.png?raw=true)

ìƒì„±ëœ í”„ë¡œì íŠ¸ ServiceApplication í´ë˜ìŠ¤ì— @EnableDiscoveryClient ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì¤€ë‹¤.

![ìœ ë ˆì¹´ í´ë¼ì´ì–¸íŠ¸ ì‹¤ìŠµ2](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%20%EC%8B%A4%EC%8A%B52.png?raw=true)

ìœ„ ì–´ë…¸í…Œì´ì…˜ì´ ì¶”ê°€ë¼ì•¼ ìœ ë ˆì¹´ ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì¸ì‹ë˜ë©° í†µì‹ ì´ ê°€ëŠ¥í•´ì§„ë‹¤.

application.yml íŒŒì¼ì— ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í¬íŠ¸ë²ˆí˜¸ì™€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ëª…ì¹­ì„ ì¶”ê°€í•´ì¤€ë‹¤.

![ìœ ë ˆì¹´ í´ë¼ì´ì–¸íŠ¸ ì‹¤ìŠµ3](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%20%EC%8B%A4%EC%8A%B53.png?raw=true)

í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ ë ˆì¹´ ì„œë²„ì— ë“±ë¡í•´ì¤€ë‹¤.

![ìœ ë ˆì¹´ ì„œë²„ í´ë¼ì´ì–¸íŠ¸ ì¶”ê°€](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%84%9C%EB%B2%84%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%20%EC%B6%94%EA%B0%80.png?raw=true)

- ë“±ë¡ ì „ ìœ ë ˆì¹´ ëŒ€ì‹œë³´ë“œ

![ìœ ë ˆì¹´ ëŒ€ì‹œë³´ë“œ1](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C1.png?raw=true)

- ë“±ë¡ í›„ ìœ ë ˆì¹´ ëŒ€ì‹œë³´ë“œ

![ìœ ë ˆì¹´ ëŒ€ì‹œë³´ë“œ2](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C2.png?raw=true)

### ë™ì¼ í”„ë¡œì íŠ¸ë¡œ ì„œë²„ 2ê°œ ì´ìƒ ì‹¤í–‰ì‹œí‚¤ê¸°

ì‹¤ì œ ë¹Œë“œ íŒŒì¼ì„ 2ê°œ ì´ìƒ ì‹¤í–‰ì‹œì¼œë„ ë˜ì§€ë§Œ, í•˜ë‚˜ì˜ ì¸í…”ë¦¬ì œì´ì—ì„œ ì—¬ëŸ¬ ê°œì˜ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹¤í–‰ í•´ë³´ì.

![ì„œë¹„ìŠ¤ ì¶”ê°€1](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F296bd731-b38b-4e72-8a80-003f529047ae%2FUntitled.png?table=block&id=ecc5cc46-34be-4ecb-8f94-5639e7e739c8&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=870&userId=&cache=v2)

ë¨¼ì € ìœ„ ê·¸ë¦¼ì—ì„œ ì²˜ëŸ¼ Edit Configurationìœ¼ë¡œ ì´ë™í•œë‹¤.

![ì„œë¹„ìŠ¤ ì¶”ê°€2](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fefe72128-f2d9-46d9-89e1-410f92f64509%2FUntitled.png?table=block&id=ff122c90-7cfa-48b0-952b-d24c00e886c9&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=870&userId=&cache=v2)

ìœ„ì²˜ëŸ¼ ì™¼ìª½ì—ì„œ 3ë²ˆì§¸ ë³µì‚¬ ë²„íŠ¼ì„ ëˆŒëŸ¬ì¤€ ë’¤ apply ë²„íŠ¼ì„ í†µí•´ ì ìš©í•´ì¤€ë‹¤.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fd6c3b71b-5c68-470b-9a2f-ac38ed4a28cc%2FUntitled.png?table=block&id=97dcf56e-a017-4520-a708-3d1f2e3e84e9&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1060&userId=&cache=v2)

ë³µì‚¬ í›„ ì‹¤í–‰ íƒ­ì„ ë‹¤ì‹œ ë³´ë©´ ì´ì œ 2ê°œì˜ ì„ íƒì§€ê°€ ìˆëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ìœ„ì˜ ë³µì‚¬ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¶”ê°€ë¡œ ì‹¤í–‰ ì‹œí‚¤ë©´,

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F0b9b1d68-fd5c-4f20-a5db-be839cb57093%2FUntitled.png?table=block&id=70f04b71-3a0e-4a61-81e8-6f5ce2bc0a41&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1600&userId=&cache=v2)

ìœ„ì²˜ëŸ¼ í¬íŠ¸ ì¶©ëŒë¡œ ì¸í•´ ì‹¤í–‰ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.

ì´ëŠ” ë³¸ë˜ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ 8003ë²ˆ í¬íŠ¸ë¥¼ ì‚¬ìš© ì¤‘ì´ê¸° ë•Œë¬¸ì´ë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ”

1. ì„œë²„ ì‹¤í–‰ ë‹¨ê³„ì—ì„œ í¬íŠ¸ê°’ì„ ìƒˆë¡­ê²Œ ì§€ì •í•œë‹¤.
2. ê° ì„œë²„ ì‹¤í–‰ ì‹œë§ˆë‹¤ ëœë¤í¬íŠ¸ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤.

ë¼ëŠ” í•´ê²°ì±…ì´ ìˆë‹¤.

ìš°ì„ , 1ë²ˆ ë¶€í„° í™•ì¸í•´ë³´ë©´

- application.yml íŒŒì¼ì—ì„œ port ë²ˆí˜¸ ìˆ˜ì •.
- Edit Configuration - add VM Options ì—ì„œ ì¶”ê°€.

ìœ„ ë‘ê°€ì§€ ë°©ë²•ì´ ìˆëŠ”ë°, ì¼ì¼íˆ yml íŒŒì¼ì—ì„œ port ë²ˆí˜¸ë¥¼ ìˆ˜ì •í•´ì£¼ëŠ” ê²ƒì€ ë²ˆê±°ë¡­ê³ , í™•ì¸í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì—

Edit Configurationì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ add VM Optionsë¡œ í¬íŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ë„ë¡ ì„¤ì •í•œë‹¤.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fb94a433d-6c13-41a9-b459-80c50666464c%2FUntitled.png?table=block&id=e1640689-1b2f-4528-86ea-e26fca865cf2&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=2000&userId=&cache=v2)

Add VM options í´ë¦­.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F9e1fa2cf-d53b-45b0-8acd-56b9332e3c29%2FUntitled.png?table=block&id=e01dae7b-c5c0-49f5-a825-8f656cdf35db&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1830&userId=&cache=v2)

`-Dserver.port=í¬íŠ¸ë²ˆí˜¸` ë¥¼ ì…ë ¥í•´ì¤€ë‹¤.

ìœ„ì—ì„œ -DëŠ” detach ëª¨ë“œë¥¼ ì˜ë¯¸í•˜ë©°, ì½˜ì†”ì°½ì„ ìˆ¨ê¸°ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°€ë™í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

![RUNì´ ì—†ë‹¤](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%8B%A4%ED%96%89%20%EC%8B%9C%20run%EC%9D%B4%20%EC%97%86%EB%8B%A4....png?raw=true)

ì´ëŠ” ì¸í…”ë¦¬ì œì´ ì½˜ì†”ì°½ì´ í•˜ë‚˜ì´ê¸° ë•Œë¬¸ì—, ë‘ ê°œ ì´ìƒì„ í•˜ë‚˜ì˜ ì¸í…”ë¦¬ì œì´ì—ì„œ ê¸°ë™ ì‹œ ì½˜ì†”ì°½ì„ ìˆ¨ê²¨ì¤˜ì•¼ í•œë‹¤.

ì‹¤ì œ Eureka ì„œë²„ ëŒ€ì‹œë³´ë“œì— ì•„ë˜ì²˜ëŸ¼ ì¶”ê°€ëœë‹¤.

![ì¶”ê°€ë¨!](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F00ed0b22-7410-4578-823d-906528a86daa%2FUntitled.png?table=block&id=554e5859-0e0c-416a-b091-9c9f13d52c64&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1530&userId=&cache=v2)

í¬íŠ¸ë²ˆí˜¸ë¥¼ ë§¤ë²ˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œë§ˆë‹¤ ë¶€ì—¬í•˜ëŠ” ê²ƒë„ ì˜ë¯¸ëŠ” ìˆë‹¤.

í•˜ì§€ë§Œ, ì¸ìŠ¤í„´ìŠ¤ ê°¯ìˆ˜ê°€ ì»¤ì§ˆìˆ˜ë¡ ì´ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë³„ë„ ì§€ì •í•˜ëŠ” ê²ƒì€ ì˜¤ë¥˜ê°€ ë‚  í™•ë¥ ì´ ë†’ì•„ì§„ë‹¤.

ë”°ë¼ì„œ, 2ë²ˆ ë°©ë²•ìœ¼ë¡œ í¬íŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ëŠ” ê²ƒì´ ë” í•©ë¦¬ì ì´ë‹¤.

![0ìœ¼ë¡œ ìˆ˜ì •](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F4dde19df-2355-4888-a482-c586691316a9%2FUntitled.png?table=block&id=e0b3c150-12f2-4f20-9701-f8c3ff28ebaf&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1240&userId=&cache=v2)

ìœ„ì˜ ë°©ì‹ëŒ€ë¡œ í•˜ê¸° ìœ„í•´ì„œ ë¨¼ì € server.port=0ìœ¼ë¡œ ìˆ˜ì •í•´ì¤€ë‹¤.

0ë²ˆ í¬íŠ¸ëŠ” ì‹¤ì œë¡œ ì—†ëŠ” í¬íŠ¸ì´ê¸° ë•Œë¬¸ì— ì‚¬ì‹¤ìƒ ëœë¤í¬íŠ¸ë¥¼ ë°°ì •í•˜ë¼ëŠ” ì˜ë¯¸ê°€ ëœë‹¤.

![ì‚­ì œ](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F8443576c-ada4-4888-b0b3-3b78f56e7d95%2FUntitled.png?table=block&id=f81c7a8c-a0ac-41e0-a193-2fa0c0f84c5b&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1310&userId=&cache=v2)

ë³µì‚¬í•œ ì¸ìŠ¤í„´ìŠ¤ì— ì¶”ê°€í–ˆë˜ í¬íŠ¸ë²ˆí˜¸ ì¶”ê°€ ì„¤ì •ì„ ì§€ì›Œì¤€ë‹¤.

ì´ì œ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì²˜ëŸ¼ í¬íŠ¸ë²ˆí˜¸ê°€ ëœë¤í•˜ê²Œ ë°°ì •ëœë‹¤.

![2ë²ˆ í¬íŠ¸ë²ˆí˜¸ ì—¬ëŸ¬ê°œ ì§€ì •](https://github.com/hyensukim/PlayData_class/blob/main/images/2%EB%B2%88%20%EB%B0%A9%EC%8B%9D%20%ED%8F%AC%ED%8A%B8%EB%B2%88%ED%98%B8%20%EB%8B%A4%EB%A5%B4%EA%B2%8C%20%EB%B0%B0%EC%A0%95.png?raw=true)

í•˜ì§€ë§Œ,

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fa64ef88d-d0bd-4fe1-a5c4-ec414ab7f75e%2FUntitled.png?table=block&id=c74fc098-3ec5-4dbc-bdf3-63e62d5652ca&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=2000&userId=&cache=v2)

ì‹¤ì œ ì¶©ëŒì€ ì—†ì§€ë§Œ ì‹¤í–‰í•˜ëŠ” 2ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ëª…ëª©ìƒ 0ë²ˆ í¬íŠ¸ë¡œ ê°ì§€ë˜ì–´

ìœ„ì²˜ëŸ¼ 1ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ì‹¤í–‰ë˜ëŠ” ê²ƒìœ¼ë¡œ ë‚˜ì˜¨ë‹¤.

ë”°ë¼ì„œ ê° ì¸ìŠ¤í„´ìŠ¤ ë§ˆë‹¤ ìœ ë ˆì¹´ì— ë³´ì—¬ì§€ëŠ” ì´ë¦„ì„ ë‹¤ë¥´ê²Œ ì„¤ì •í•  í•„ìš”ê°€ ìˆë‹¤.

##### application.yml

```
eureka:
  instance:
    instance-id: ${spring.client.cloud.hostname}:${spring.application.instance_id:${random.value}}
```

ìœ„ì²˜ëŸ¼ yml íŒŒì¼ì— ì„¤ì •ì„ ì¶”ê°€í•´ì¤€ë‹¤.

ì´í›„ ëª¨ë“  ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬ì‹¤í–‰ í•´ì£¼ë©´,  í¬íŠ¸ë²ˆí˜¸ë¥¼ ì§ì ‘ ì§€ì •í•˜ì§€ ì•Šê³ ë„ ì‹ë³„ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°ì§€í•  ìˆ˜ ìˆë”ë¡ ë˜ì—ˆë‹¤.

![img](https://github.com/hyensukim/PlayData_class/blob/main/images/%ED%8F%AC%ED%8A%B8%EB%B2%88%ED%98%B8%20%EC%88%98%EC%A0%95%20%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C.png?raw=true)

### ê¸°ì¡´ì— ìˆë˜ ì„œë¹„ìŠ¤ì— Eureka Client ì ìš©í•˜ê¸°

ê¸°ì¡´ì— first-service ì™€ second-serviceë¥¼ í™œìš©

í”„ë¡œì íŠ¸ ìƒì„± ì‹œì ì´ ì•„ë‹Œ ì´ë¯¸ ì™„ì„±ëœ í”„ë¡œì íŠ¸ ë””ìŠ¤ì»¤ë²„ë¦¬ í´ë¼ì´ì–¸íŠ¸ ë“±ë¡ì„ ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ê³¼ì •ìœ¼ë¡œ ì§„í–‰í•´ì£¼ë©´ ëœë‹¤.

1. mvnrepository.com ì—ì„œ eureka clientë¥¼ ê²€ìƒ‰

![](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F891c63f9-8820-4e53-8b26-3ca124fe2060%2F%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-13_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.39.17.png?table=block&id=206d3db5-5514-4cbb-af76-420707a84564&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1530&userId=&cache=v2)

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fbfc592bb-4e12-4f12-9e57-8b6988226b5b%2F%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-10-13_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_5.40.41.png?table=block&id=66934cbf-48e2-46bd-b620-5109d207da6f&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1530&userId=&cache=v2)

ìœ„ì˜ Eureka Client ì˜ì¡´ì„±ì„ build.gradleì— ì¶”ê°€í•´ì¤€ë‹¤.


2. application.yml íŒŒì¼ì— client ê´€ë ¨ ì„¤ì •ì„ ì¶”ê°€í•´ì¤€ë‹¤.

##### application.yml

```
eureka:
  client:
    register-with-eureka: true
    fetch-registry: true
    service-url:
      defaultZone: http://127.0.0.1:8761/eureka
  instance:
    instance-id: ${spring.application.name}:${spring.application.instance_id:${random.value}}
```


3. ServerApplicationì— @EnableDiscoveryClient ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€í•´ì¤€ë‹¤.

### ë¡œë“œë°¸ëŸ°ì„œ í™œìš©í•˜ê¸°

ë¨¼ì € gateway-server ì—­ì‹œ ìœ ë ˆì¹´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë“±ë¡.

Sping Cloud Gatewayì—ì„œ ì´ì œ urië¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F8da05487-6eee-4f5a-b669-36d31b1cbad6%2FUntitled.png?table=block&id=fff4d484-3b29-404a-965c-744865cb855d&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1530&userId=&cache=v2)

ìœ ë ˆì¹´ì— ë“±ë¡ëœ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ 

`lb:// ìœ ë ˆì¹´ ë“±ë¡ì–´í”Œë¦¬ì¼€ì´ì…˜ëª…`

í˜•ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ uriì— ë“±ë¡í•´ì£¼ë©´ ëœë‹¤.


ê·¸ ë‹¤ìŒ í¬íŠ¸ë²ˆí˜¸ë¥¼ 0ìœ¼ë¡œ ë°”ê¿”ì„œ ëœë¤í¬íŠ¸ë¥¼ í™œì„±í™” ì‹œì¼œì¤€ ë‹¤ìŒ

ì»¨íŠ¸ë¡¤ëŸ¬ ì¸¡ì— í¬íŠ¸ë²ˆí˜¸ë¥¼ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.

ì´ë ‡ê²Œ ë˜ë©´ ë¡œë“œ ë°¸ëŸ°ì„œê°€ ì–´ë–¤ ì„œë¹„ìŠ¤ê°€ ë³´ë‚´ì£¼ëŠ”ì§€ì— ë”°ë¼

ê·¸ë•Œ ê·¸ë•Œ ë³´ì—¬ì§€ëŠ” í¬íŠ¸ë²ˆí˜¸ê°€ ë‹¬ë¼ì§ˆ ê²ƒì´ë‹¤.

ì¼ë‹¨ ìœ ë ˆì¹´ ì„œë²„ì—ì„œ ìƒíƒœì°½ì—ì„œ ë³´ì—¬ì§€ëŠ” ì´ë¦„ì„ ì–´í”Œë¦¬ì¼€ì´ì…˜ëª…ìœ¼ë¡œ ë°”ê¾¸ê¸° ìœ„í•´

```
eureka:
  instance:
    instance-id: ${spring.application.name}:${spring.application.instance_id:${random.value}}
```

ìœ„ ì²˜ëŸ¼ ì¸ìŠ¤í„´ìŠ¤ ì•„ì´ë””ë¥¼ `${spring.application.name}` ìœ¼ë¡œ ë³€ê²½í•´ì¤€ë‹¤.


![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fbbfb682b-1668-4bde-83a7-1e94c473f093%2FUntitled.png?table=block&id=b0941c15-5ffb-4dee-a924-aac6d2908896&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1530&userId=&cache=v2)

ê·¸ ë‹¤ìŒìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ ìª½ì—ì„œ í¬íŠ¸ë²ˆí˜¸ë¥¼ ê°ì§€í•  ìˆ˜ ìˆëŠ” ë©¤ë²„ë³€ìˆ˜ë¥¼ ì¶”ê°€í•´ë³´ê² ë‹¤.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fca5fe759-5aaf-4ff2-b65e-0fbd3713a6c2%2FUntitled.png?table=block&id=3c67ad01-b40c-4f19-89e6-edc1fe1528fd&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1530&userId=&cache=v2)

ê°„í—ì ìœ¼ë¡œ ì„œë²„ë¥¼ ì¬ì‹œì‘í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ Downì´ë¼ê³  í˜„ì¬ ë‚´ë ¤ê°€ê³  ìˆëŠ” ì„œë²„ ëª©ë¡ì´ ë‚˜íƒ€ë‚˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.

ìœ ë ˆì¹´ ë””ìŠ¤ì»¤ë²„ë¦¬ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ 30ì´ˆ ë™ì•ˆ 3ë²ˆ í†µì‹ í•œ í›„ í—¬ìŠ¤ì²´í¬ë¥¼ ì¢…ë£Œí•˜ê¸° ë•Œë¬¸ì—

ê°„í—ì ìœ¼ë¡œ ì €ë ‡ê²Œ ë‚˜ì˜¬ ìˆ˜ ìˆì§€ë§Œ ê²°êµ­ ìë™ìœ¼ë¡œ í•´ê²°ë˜ë¯€ë¡œ ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

ê²Œì´íŠ¸ì›¨ì´ë¥¼ ê²½ìœ í•˜ì—¬ port-checkë¥¼ í•´ë³´ì

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fe42ffdb6-132f-4eff-bd42-063a9c309041%2FUntitled.png?table=block&id=255629b6-2a27-4d8d-85b2-3ce2fa28c166&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1030&userId=&cache=v2)

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F8d7c4610-8039-42d5-8118-04aa11e3ae69%2FUntitled.png?table=block&id=a6216077-b5a0-4548-8c67-9ccc24a969a4&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1060&userId=&cache=v2)

ìœ„ì²˜ëŸ¼ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ë°”ê¿”ê°€ë©´ì„œ ì ‘ì†ì‹œì¼œì£¼ì–´ ë¡œë“œ ë°¸ëŸ°ì‹±ì´ ì¼ì–´ë‚˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
