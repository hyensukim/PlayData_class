# 3. μ¤ν”„λ§ λ””μ¤μ»¤λ²„λ¦¬ μ λ μΉ΄ μ„λ²„

μ¤ν”„λ§ ν΄λΌμ°λ“μ—μ„ μ κ³µν•λ” Eurekaλ” λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ²μ—μ„ μ„λΉ„μ¤μ λ“±λ΅, λ°κ²¬, λ° κ΄€λ¦¬λ¥Ό μ„ν• μ„λΉ„μ¤ [λ””μ¤μ»¤λ²„λ¦¬ μ„λ²„](https://github.com/hyensukim/PlayData_class/blob/main/class/%EC%96%B8%EC%96%B4%20%EC%84%A4%EB%AA%85/%EB%94%94%EC%8A%A4%EC%BB%A4%EB%B2%84%EB%A6%AC.md "μ„¤λ…")μ΄λ‹¤. μ΄λ¥Ό ν†µν•΄ λ§μ΄ν¬λ΅μ„λΉ„μ¤ κ°„μ ν†µμ‹ μ΄ ν¨μ¨μ μΌλ΅ μ΄λ¤„μ§ μ μλ‹¤.

### μ°μ„  μ„¤λ…ν•κΈ°μ— μ•μ„, Spring-cloud Eurekaλ€ λ¬΄μ—‡μΌκΉ?

μ¤ν”„λ§ ν΄λΌμ°λ“μ—μ„ μ κ³µν• APIλ¥Ό μ°Έκ³ ν•μ—¬ κ° κΈ°μ—…λ§λ‹¤ κµ¬ν„ν• μ½”λ“λ΅μ¨, Open sourceμ μ΄μ μ„ ν™μ©ν•κΈ° μ„ν•΄ Spring Cloudμ— κΈ°λ¶€ν• κµ¬ν„ μ½”λ“μ΄λ‹¤.

κ·Έ μ¤‘ ν•λ‚κ°€ Spring-cloud Eurekaμ΄λ‹¤.

Eurekaλ” 2κ°€μ§€λ΅ λ¶„λ¥λλ”λ°, Eureka Serverμ™€ Eureka Discovery Clientλ΅ κµ¬λ¶„λλ‹¤.

- Eureka Server : λ””μ¤μ»¤λ²„λ¦¬ μ„λ²„λ΅μ„, λ΅λ“ λ°Έλ°μ‹±κ³Ό ν—¬μ¤ μ²΄ν¬ κΈ°λ¥μ„ ν•λ‹¤.
- Eureka Discovery Client : μ λ μΉ΄ μ„λ²„λ΅ λ¶€ν„° κ΄€λ¦¬λ  λ§μ΄ν¬λ΅μ„λΉ„μ¤λ“¤μ„ μλ―Έν•λ‹¤.

### λ””μ¤μ»¤λ²„λ¦¬ μ„λ²„κ°€ ν•„μ”ν• μ΄μ ?

![img](https://raw.githubusercontent.com/hyensukim/PlayData_class/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%9A%94%EC%B2%AD%20%EA%B7%B8%EB%A6%BC.png)

κ²μ΄νΈμ›¨μ΄ μ„λ²„λ΅λ§ μ‚¬μ©ν•  κ²½μ°, λ΅λ“ λ°Έλ°μ‹±μ΄λ‚ ν—¬μ¤ μ²΄ν¬κΉμ§€ ν•λ”λ° μ–΄λ ¤μ›€μ΄ μμ–΄, μ΄λ¥Ό ν• λ‹Ήν• λ””μ¤μ»¤λ²„λ¦¬ μ„λ²„λ΅ λ΅λ“ λ°Έλ°μ‹± λ° ν—¬μ¤ μ²΄ν¬ κΈ°λ¥μ„ μν–‰ν•λ„λ΅ ν•λ‹¤.

## π‡ Spring cloud Eureka

### μ£Όμ” νΉμ§• :

- μ„λΉ„μ¤ λ“±λ΅(Service Registration) : λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ‹μ‘ μ‹ Eureka μ„λ²„μ— μμ‹ μ μ„μΉ μ •λ³΄λ¥Ό λ“±λ΅ν•λ‹¤. μ΄λ¥Ό ν†µν•΄ λ‹¤λ¥Έ μ„λΉ„μ¤λ‚ ν΄λΌμ΄μ–ΈνΈκ°€ ν•΄λ‹Ή μ„λΉ„μ¤λ¥Ό μ°Ύμ„ μ μλ‹¤.
- μ„λΉ„μ¤ κ°μ§€(Service Discovery) : Eureka ν΄λΌμ΄μ–ΈνΈ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬, μ„λΉ„μ¤λ¥Ό μ°Ύκ³  ν•΄λ‹Ή μ„λΉ„μ¤μ λ©”νƒ€λ°μ΄ν„°λ¥Ό κ°€μ Έμ¬ μ μλ‹¤. μ΄λ¥Ό ν†µν•΄ λ™μ μΌλ΅ μ„λΉ„μ¤μ μ„μΉ νμ•…μ΄ κ°€λ¥ν•λ‹¤.
- μ„λΉ„μ¤ μƒνƒ κ°μ‹(Health Monitoring) : Eurekaλ” μ£ΌκΈ°μ μΌλ΅ λ“±λ΅λ μ„λΉ„μ¤μ μƒνƒλ¥Ό ν™•μΈν•λ‹¤. μ΄λ¥Ό ν†µν•΄ μ¥μ• κ°€ λ°μƒν• μ„λΉ„μ¤λ¥Ό κ°μ§€ν•κ³  λ‹¤λ¥Έ μ„λΉ„μ¤λ΅ μ”μ²­μ„ λΌμ°ν…ν•  μ μλ‹¤.
- λ™μ  μ„λΉ„μ¤ λ³€κ²½(Dynamic Service Changes) : μƒλ΅μ΄ μ„λΉ„μ¤ μΈμ¤ν„΄μ¤κ°€ μ¶”κ°€λκ±°λ‚ κΈ°μ΅΄μ μΈμ¤ν„΄μ¤κ°€ μ κ±°λμ–΄λ„ Eurekaλ” μ΄λ¥Ό κ°μ§€ν•κ³  μ„λΉ„μ¤ λ©λ΅μ„ μ—…λ°μ΄νΈν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λ΅λ“ λ°Έλ°μ‹±(Client-Side Load Balancing) : μ λ μΉ΄ ν΄λΌμ΄μ–ΈνΈ λΌμ΄λΈλ¬λ¦¬λ” μ—¬λ¬ μΈμ¤ν„΄μ¤ μ¤‘ ν•λ‚λ¥Ό μ„ νƒν•μ—¬ μ„λΉ„μ¤λ΅ μ”μ²­μ„ λ³΄λ‚΄λ”λ°, μ΄λ¥Ό ν†µν•΄ λ¶€ν•λ¥Ό λ¶„μ‚°ν•λ‹¤.

### μ‘λ™ μ›λ¦¬ :

1. Eureka μ„λ²„ κµ¬λ™ : λ§μ΄ν¬λ΅μ„λΉ„μ¤μ—μ„ μ‚¬μ©ν•  Eureka μ„λ²„λ¥Ό μ‹¤ν–‰. μ΄λ” μ„λΉ„μ¤ λ””μ¤μ»¤λ²„λ¦¬μ μ¤‘μ‹¬ μ—­ν• μ„ ν•λ‹¤.
2. μ„λΉ„μ¤ λ“±λ΅ : λ§μ΄ν¬λ΅μ„λΉ„μ¤κ°€ μ‹μ‘λ  λ•, ν•΄λ‹Ή μ„λΉ„μ¤λ” Eureka μ„λ²„μ— μμ‹ μ μ •λ³΄λ¥Ό λ“±λ΅ν•λ‹¤. μ΄ μ •λ³΄μ—λ” μ„λΉ„μ¤μ μ΄λ¦„, IP μ£Όμ†, ν¬νΈ λ²νΈ λ“±μ μ •λ³΄κ°€ ν¬ν•¨λλ‹¤.
3. μ„λΉ„μ¤ κ°μ§€ : λ‹¤λ¥Έ λ§μ΄ν¬λ΅μ„λΉ„μ¤λ‚ ν΄λΌμ΄μ–ΈνΈκ°€ νΉμ • μ„λΉ„μ¤λ¥Ό νΈμ¶ν•κΈ° μ„ν•΄μ„λ” Eureka ν΄λΌμ΄μ–ΈνΈ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ Eureka μ„λ²„μ—μ„ ν•΄λ‹Ή μ„λΉ„μ¤μ μΈμ¤ν„΄μ¤λ¥Ό μ°Ύμ•„μ•Ό ν•λ‹¤.
4. μ„λΉ„μ¤ μ‚¬μ© : ν΄λΌμ΄μ–ΈνΈλ” Eurekaλ΅λ¶€ν„° λ°›μ€ μ„λΉ„μ¤ μΈμ¤ν„΄μ¤ λ©λ΅ μ¤‘ ν•λ‚λ¥Ό μ„ νƒν•μ—¬ μ”μ²­μ„ λ³΄λ‚Έλ‹¤. μ΄λ•, ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λ΅λ“ λ°Έλ°μ‹±μ„ ν†µν•΄ λ¶€ν•κ°€ κ³ λ¥΄κ² λ¶„μ‚°λλ‹¤.
5. μ„λΉ„μ¤ μƒνƒ κ°μ‹ : Eureka μ„λ²„λ” μ£ΌκΈ°μ μΌλ΅ λ“±λ΅λ μ„λΉ„μ¤μ μƒνƒλ¥Ό ν™•μΈν•λ‹¤. λ§μ•½ μ„λΉ„μ¤κ°€ μ‘λ‹µν•μ§€ μ•λ”λ‹¤λ©΄ ν•΄λ‹Ή μΈμ¤ν„΄μ¤λ¥Ό λ‹¤λ¥Έ μΈμ¤ν„΄μ¤λ΅ λ€μ²΄ν•  μ μλ‹¤.
6. λ™μ  μ„λΉ„μ¤ λ³€κ²½ : μƒλ΅μ΄ μ„λΉ„μ¤ μΈμ¤ν„΄μ¤κ°€ μ¶”κ°€λκ±°λ‚ κΈ°μ΅΄ μΈμ¤ν„΄μ¤κ°€ μ κ±°λλ©΄, Eurekaλ” μ΄λ¥Ό κ°μ§€ν•κ³  μ„λΉ„μ¤ λ©λ΅μ„ μ—…λ°μ΄νΈν•λ‹¤.

### Eureka μ„λ²„ μ„¤μ • :

```
server : 
	port : 8761
eureka: 
	client:
		register-with-eureka: false
		fetch-registry: false

```

μ„ μ„¤μ •μ€ Eureka μ„λ²„λ¥Ό 8761 ν¬νΈλ΅ μ‹¤ν–‰ν•λ©°, μ„λΉ„μ¤ λ“±λ΅ λ° μ„λΉ„μ¤ λ©λ΅ μ΅°νλ¥Ό μ„ν• μ„¤μ •μ΄λ‹¤.

`register-with-eureka`, `fetch-registry` λ¥Ό falseλ΅ μ„¤μ •ν•μ—¬ ν•΄λ‹Ή μ„λ²„λ” μμ‹ μ„ λ“±λ΅ν•μ§€ μ•κ³ , λ“±λ΅λ μ„λΉ„μ¤ λ©λ΅μ„ κ°€μ Έμ¤μ§€ μ•λ„λ΅ μ„¤μ •ν–λ‹¤.

### μ”μ•½ :

Spring cloud Eurekaλ” μ„λΉ„μ¤ λ””μ¤μ»¤λ²„λ¦¬λ¥Ό μ‰½κ² κµ¬ν„ν•  μ μλ„λ΅ ν•΄μ£Όλ” λΌμ΄λΈλ¬λ¦¬μ΄λ‹¤. μ„λΉ„μ¤ λ“±λ΅, κ°μ§€, μƒνƒ λ¨λ‹ν„°λ§ λ“±μ„ ν†µν•΄ λ§μ΄ν¬λ΅μ„λΉ„μ¤ κ°„μ ν¨μ¨μ μΈ ν†µμ‹ μ„ κ°€λ¥ν•λ„λ΅ ν•΄μ¤€λ‹¤.

### μ‹¤μµν•κΈ°

ν”„λ΅μ νΈ μƒμ„± μ‹ λ””μ¤μ»¤λ²„λ¦¬ μ λ μΉ΄ μ„λ²„λ¥Ό μ¶”κ°€ν•΄μ¤€λ‹¤.

![μ λ μΉ΄ μ‹¤μµ1](https://raw.githubusercontent.com/hyensukim/PlayData_class/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%8B%A4%EC%8A%B51.png)

κ·Έ λ‹¤μμΌλ΅ ServerApplication μ— @EnableEurekaServer μ–΄λ…Έν…μ΄μ…μ„ μ¶”κ°€ν•΄μ¤€λ‹¤.

![μ λ μΉ΄ μ‹¤μµ2](https://raw.githubusercontent.com/hyensukim/PlayData_class/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%8B%A4%EC%8A%B52.png)

λ§μ§€λ§‰μΌλ΅, application.yml νμΌμ— discovery-server κ΄€λ ¨ μ„¤μ •μ„ μ¶”κ°€ν•΄μ¤€λ‹¤.

![μ λ μΉ΄ μ‹¤μµ3](https://raw.githubusercontent.com/hyensukim/PlayData_class/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%8B%A4%EC%8A%B53.png)

### Eureka μ„λ²„μ— μ„λΉ„μ¤ λ“±λ΅ν•κ³  ν™•μΈν•κΈ°

μ λ μΉ΄ μ„λ²„μ— λ“±λ΅ν•  μ„λΉ„μ¤λ” Eureka Discovery Client μμ΅΄μ„±μ„ μ¶”κ°€ν•΄μ¤μ•Ό ν•λ‹¤.

![μ λ μΉ΄ ν΄λΌμ΄μ–ΈνΈ μ‹¤μµ1](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%20%EC%8B%A4%EC%8A%B51.png?raw=true)

μƒμ„±λ ν”„λ΅μ νΈ ServiceApplication ν΄λμ¤μ— @EnableDiscoveryClient μ–΄λ…Έν…μ΄μ…μ„ μ¶”κ°€ν•΄μ¤€λ‹¤.

![μ λ μΉ΄ ν΄λΌμ΄μ–ΈνΈ μ‹¤μµ2](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%20%EC%8B%A4%EC%8A%B52.png?raw=true)

μ„ μ–΄λ…Έν…μ΄μ…μ΄ μ¶”κ°€λΌμ•Ό μ λ μΉ΄ μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μΈμ‹λλ©° ν†µμ‹ μ΄ κ°€λ¥ν•΄μ§„λ‹¤.

application.yml νμΌμ— λ§μ΄ν¬λ΅μ„λΉ„μ¤ ν¬νΈλ²νΈμ™€ λ§μ΄ν¬λ΅μ„λΉ„μ¤ λ…μΉ­μ„ μ¶”κ°€ν•΄μ¤€λ‹¤.

![μ λ μΉ΄ ν΄λΌμ΄μ–ΈνΈ μ‹¤μµ3](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%20%EC%8B%A4%EC%8A%B53.png?raw=true)

ν΄λΌμ΄μ–ΈνΈλ¥Ό μ λ μΉ΄ μ„λ²„μ— λ“±λ΅ν•΄μ¤€λ‹¤.

![μ λ μΉ΄ μ„λ²„ ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EC%84%9C%EB%B2%84%20%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8%20%EC%B6%94%EA%B0%80.png?raw=true)

- λ“±λ΅ μ „ μ λ μΉ΄ λ€μ‹λ³΄λ“

![μ λ μΉ΄ λ€μ‹λ³΄λ“1](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C1.png?raw=true)

- λ“±λ΅ ν›„ μ λ μΉ΄ λ€μ‹λ³΄λ“

![μ λ μΉ΄ λ€μ‹λ³΄λ“2](https://github.com/hyensukim/PlayData_class/blob/main/images/%EC%9C%A0%EB%A0%88%EC%B9%B4%20%EB%8C%80%EC%8B%9C%EB%B3%B4%EB%93%9C2.png?raw=true)

### λ™μΌ ν”„λ΅μ νΈλ΅ μ„λ²„ 2κ° μ΄μƒ μ‹¤ν–‰μ‹ν‚¤κΈ°

μ‹¤μ  λΉλ“ νμΌμ„ 2κ° μ΄μƒ μ‹¤ν–‰μ‹μΌλ„ λμ§€λ§, ν•λ‚μ μΈν…”λ¦¬μ μ΄μ—μ„ μ—¬λ¬ κ°μ μ„λΉ„μ¤ μΈμ¤ν„΄μ¤λ¥Ό μ‹¤ν–‰ ν•΄λ³΄μ.

![μ„λΉ„μ¤ μ¶”κ°€1](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F296bd731-b38b-4e72-8a80-003f529047ae%2FUntitled.png?table=block&id=ecc5cc46-34be-4ecb-8f94-5639e7e739c8&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=870&userId=&cache=v2)

λ¨Όμ € μ„ κ·Έλ¦Όμ—μ„ μ²λΌ Edit ConfigurationμΌλ΅ μ΄λ™ν•λ‹¤.

![μ„λΉ„μ¤ μ¶”κ°€2](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fefe72128-f2d9-46d9-89e1-410f92f64509%2FUntitled.png?table=block&id=ff122c90-7cfa-48b0-952b-d24c00e886c9&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=870&userId=&cache=v2)

μ„μ²λΌ μ™Όμ½μ—μ„ 3λ²μ§Έ λ³µμ‚¬ λ²„νΌμ„ λλ¬μ¤€ λ’¤ apply λ²„νΌμ„ ν†µν•΄ μ μ©ν•΄μ¤€λ‹¤.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fd6c3b71b-5c68-470b-9a2f-ac38ed4a28cc%2FUntitled.png?table=block&id=97dcf56e-a017-4520-a708-3d1f2e3e84e9&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1060&userId=&cache=v2)

λ³µμ‚¬ ν›„ μ‹¤ν–‰ νƒ­μ„ λ‹¤μ‹ λ³΄λ©΄ μ΄μ  2κ°μ μ„ νƒμ§€κ°€ μλ”κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

μ„μ λ³µμ‚¬λ μΈμ¤ν„΄μ¤λ¥Ό μ¶”κ°€λ΅ μ‹¤ν–‰ μ‹ν‚¤λ©΄,

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F0b9b1d68-fd5c-4f20-a5db-be839cb57093%2FUntitled.png?table=block&id=70f04b71-3a0e-4a61-81e8-6f5ce2bc0a41&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1600&userId=&cache=v2)

μ„μ²λΌ ν¬νΈ μ¶©λλ΅ μΈν•΄ μ‹¤ν–‰μ΄ λμ§€ μ•λ”λ‹¤.

μ΄λ” λ³Έλ μΈμ¤ν„΄μ¤μ—μ„ 8003λ² ν¬νΈλ¥Ό μ‚¬μ© μ¤‘μ΄κΈ° λ•λ¬Έμ΄λ‹¤.

μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄μ„λ”

1. μ„λ²„ μ‹¤ν–‰ λ‹¨κ³„μ—μ„ ν¬νΈκ°’μ„ μƒλ΅­κ² μ§€μ •ν•λ‹¤.
2. κ° μ„λ²„ μ‹¤ν–‰ μ‹λ§λ‹¤ λλ¤ν¬νΈλ¥Ό μ‹¤ν–‰ν•λ„λ΅ ν•λ‹¤.

λΌλ” ν•΄κ²°μ±…μ΄ μλ‹¤.

μ°μ„ , 1λ² λ¶€ν„° ν™•μΈν•΄λ³΄λ©΄

- application.yml νμΌμ—μ„ port λ²νΈ μμ •.
- Edit Configuration - add VM Options μ—μ„ μ¶”κ°€.

μ„ λ‘κ°€μ§€ λ°©λ²•μ΄ μλ”λ°, μΌμΌν yml νμΌμ—μ„ port λ²νΈλ¥Ό μμ •ν•΄μ£Όλ” κ²ƒμ€ λ²κ±°λ΅­κ³ , ν™•μΈν•κΈ° μ–΄λ µκΈ° λ•λ¬Έμ—

Edit Configurationμ—μ„ μΈμ¤ν„΄μ¤ μƒμ„± μ‹ add VM Optionsλ΅ ν¬νΈλ¥Ό μ¶”κ°€ν•΄μ£Όλ„λ΅ μ„¤μ •ν•λ‹¤.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fb94a433d-6c13-41a9-b459-80c50666464c%2FUntitled.png?table=block&id=e1640689-1b2f-4528-86ea-e26fca865cf2&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=2000&userId=&cache=v2)

Add VM options ν΄λ¦­.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F9e1fa2cf-d53b-45b0-8acd-56b9332e3c29%2FUntitled.png?table=block&id=e01dae7b-c5c0-49f5-a825-8f656cdf35db&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1830&userId=&cache=v2)

`-Dserver.port=ν¬νΈλ²νΈ` λ¥Ό μ…λ ¥ν•΄μ¤€λ‹¤.

μ„μ—μ„ -Dλ” detach λ¨λ“λ¥Ό μλ―Έν•λ©°, μ½μ†”μ°½μ„ μ¨κΈ°κ³  μ• ν”λ¦¬μΌ€μ΄μ…μ„ κ°€λ™ν•λ‹¤λ” μλ―Έμ΄λ‹¤.

![RUNμ΄ μ—†λ‹¤]()

μ΄λ” μΈν…”λ¦¬μ μ΄ μ½μ†”μ°½μ΄ ν•λ‚μ΄κΈ° λ•λ¬Έμ—, λ‘ κ° μ΄μƒμ„ ν•λ‚μ μΈν…”λ¦¬μ μ΄μ—μ„ κΈ°λ™ μ‹ μ½μ†”μ°½μ„ μ¨κ²¨μ¤μ•Ό ν•λ‹¤.

μ‹¤μ  Eureka μ„λ²„ λ€μ‹λ³΄λ“μ— μ•„λμ²λΌ μ¶”κ°€λλ‹¤.

![μ¶”κ°€λ¨!]()

1λ²μ²λΌ ν¬νΈλ²νΈλ¥Ό λ§¤λ² μΈμ¤ν„΄μ¤ μƒμ„± μ‹λ§λ‹¤ λ¶€μ—¬ν•λ” κ²ƒλ„ μλ―Έλ” μλ‹¤.

ν•μ§€λ§, μΈμ¤ν„΄μ¤ κ°―μκ°€ μ»¤μ§μλ΅ μ΄λ¥Ό μλ™μΌλ΅ λ³„λ„ μ§€μ •ν•λ” κ²ƒμ€ μ¤λ¥κ°€ λ‚  ν™•λ¥ μ΄ λ†’μ•„μ§„λ‹¤.

λ”°λΌμ„, 2λ² λ°©λ²•μΌλ΅ ν¬νΈλ¥Ό μ¶”κ°€ν•΄μ£Όλ” κ²ƒμ΄ λ” ν•©λ¦¬μ μ΄λ‹¤.

![0μΌλ΅ μμ •](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F4dde19df-2355-4888-a482-c586691316a9%2FUntitled.png?table=block&id=e0b3c150-12f2-4f20-9701-f8c3ff28ebaf&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1240&userId=&cache=v2)

μ„μ λ°©μ‹λ€λ΅ ν•κΈ° μ„ν•΄μ„ λ¨Όμ € server.port=0μΌλ΅ μμ •ν•΄μ¤€λ‹¤.

0λ² ν¬νΈλ” μ‹¤μ λ΅ μ—†λ” ν¬νΈμ΄κΈ° λ•λ¬Έμ— μ‚¬μ‹¤μƒ λλ¤ν¬νΈλ¥Ό λ°°μ •ν•λΌλ” μλ―Έκ°€ λλ‹¤.

![μ‚­μ ](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F8443576c-ada4-4888-b0b3-3b78f56e7d95%2FUntitled.png?table=block&id=f81c7a8c-a0ac-41e0-a193-2fa0c0f84c5b&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1310&userId=&cache=v2)

λ³µμ‚¬ν• μΈμ¤ν„΄μ¤μ— μ¶”κ°€ν–λ ν¬νΈλ²νΈ μ¶”κ°€ μ„¤μ •μ„ μ§€μ›μ¤€λ‹¤.

μ΄μ  μ‹¤ν–‰ν•λ©΄ μ•„λμ²λΌ ν¬νΈλ²νΈκ°€ λλ¤ν•κ² λ°°μ •λλ‹¤.

![2λ² ν¬νΈλ²νΈ μ—¬λ¬κ° μ§€μ •]()

ν•μ§€λ§,

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fa64ef88d-d0bd-4fe1-a5c4-ec414ab7f75e%2FUntitled.png?table=block&id=c74fc098-3ec5-4dbc-bdf3-63e62d5652ca&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=2000&userId=&cache=v2)

μ‹¤μ  μ¶©λμ€ μ—†μ§€λ§ μ‹¤ν–‰ν•λ” 2κ°μ μΈμ¤ν„΄μ¤κ°€ λ…λ©μƒ 0λ² ν¬νΈλ΅ κ°μ§€λμ–΄

μ„μ²λΌ 1κ°μ μΈμ¤ν„΄μ¤λ§ μ‹¤ν–‰λλ” κ²ƒμΌλ΅ λ‚μ¨λ‹¤.

λ”°λΌμ„ κ° μΈμ¤ν„΄μ¤ λ§λ‹¤ μ λ μΉ΄μ— λ³΄μ—¬μ§€λ” μ΄λ¦„μ„ λ‹¤λ¥΄κ² μ„¤μ •ν•  ν•„μ”κ°€ μλ‹¤.

##### application.yml

```
eureka:
  instance:
    instance-id: ${spring.client.cloud.hostname}:${spring.application.instance_id:${random.value}}
```

μ„μ²λΌ yml νμΌμ— μ„¤μ •μ„ μ¶”κ°€ν•΄μ¤€λ‹¤.


μ΄ν›„ λ¨λ“  μ„λΉ„μ¤ μΈμ¤ν„΄μ¤λ¥Ό μ¬μ‹¤ν–‰ ν•΄μ£Όλ©΄,  ν¬νΈλ²νΈλ¥Ό μ§μ ‘ μ§€μ •ν•μ§€ μ•κ³ λ„ μ‹λ³„λ μΈμ¤ν„΄μ¤λ¥Ό κ°μ§€ν•  μ μλ”λ΅ λμ—λ‹¤.


### κΈ°μ΅΄μ— μλ μ„λΉ„μ¤μ— Eureka Client μ μ©ν•κΈ°

### λ΅λ“λ°Έλ°μ„ ν™μ©ν•κΈ°

λ¨Όμ € gateway-server μ—­μ‹ μ λ μΉ΄μ—μ„ μ‚¬μ©ν•  μ μλ„λ΅ λ“±λ΅.

Sping Cloud Gatewayμ—μ„ μ΄μ  uriλ¥Ό λ³€κ²½ν•΄μ•Ό ν•λ‹¤.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F8da05487-6eee-4f5a-b669-36d31b1cbad6%2FUntitled.png?table=block&id=fff4d484-3b29-404a-965c-744865cb855d&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1530&userId=&cache=v2)

μ λ μΉ΄μ— λ“±λ΅λ μ΄λ¦„μ„ κ·Έλ€λ΅ 

`lb:// μ λ μΉ΄ λ“±λ΅μ–΄ν”λ¦¬μΌ€μ΄μ…λ…`

ν•μ‹μΌλ΅ λ³€κ²½ν•μ—¬ uriμ— λ“±λ΅ν•΄μ£Όλ©΄ λλ‹¤.


κ·Έ λ‹¤μ ν¬νΈλ²νΈλ¥Ό 0μΌλ΅ λ°”κΏ”μ„ λλ¤ν¬νΈλ¥Ό ν™μ„±ν™” μ‹μΌμ¤€ λ‹¤μ

μ»¨νΈλ΅¤λ¬ μΈ΅μ— ν¬νΈλ²νΈλ¥Ό λ³΄μ—¬μ£Όλ” κΈ°λ¥μ„ κµ¬ν„ν•λ‹¤.

μ΄λ ‡κ² λλ©΄ λ΅λ“ λ°Έλ°μ„κ°€ μ–΄λ–¤ μ„λΉ„μ¤κ°€ λ³΄λ‚΄μ£Όλ”μ§€μ— λ”°λΌ

κ·Έλ• κ·Έλ• λ³΄μ—¬μ§€λ” ν¬νΈλ²νΈκ°€ λ‹¬λΌμ§ κ²ƒμ΄λ‹¤.

μΌλ‹¨ μ λ μΉ΄ μ„λ²„μ—μ„ μƒνƒμ°½μ—μ„ λ³΄μ—¬μ§€λ” μ΄λ¦„μ„ μ–΄ν”λ¦¬μΌ€μ΄μ…λ…μΌλ΅ λ°”κΎΈκΈ° μ„ν•΄

```
eureka:
  instance:
    instance-id: ${spring.application.name}:${spring.application.instance_id:${random.value}}
```

μ„ μ²λΌ μΈμ¤ν„΄μ¤ μ•„μ΄λ””λ¥Ό `${spring.application.name}` μΌλ΅ λ³€κ²½ν•΄μ¤€λ‹¤.


![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fbbfb682b-1668-4bde-83a7-1e94c473f093%2FUntitled.png?table=block&id=b0941c15-5ffb-4dee-a924-aac6d2908896&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1530&userId=&cache=v2)

κ·Έ λ‹¤μμΌλ΅ μ»¨νΈλ΅¤λ¬ μ½μ—μ„ ν¬νΈλ²νΈλ¥Ό κ°μ§€ν•  μ μλ” λ©¤λ²„λ³€μλ¥Ό μ¶”κ°€ν•΄λ³΄κ² λ‹¤.

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fca5fe759-5aaf-4ff2-b65e-0fbd3713a6c2%2FUntitled.png?table=block&id=3c67ad01-b40c-4f19-89e6-edc1fe1528fd&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1530&userId=&cache=v2)

κ°„ν—μ μΌλ΅ μ„λ²„λ¥Ό μ¬μ‹μ‘ν•λ©΄ μ•„λμ™€ κ°™μ΄ Downμ΄λΌκ³  ν„μ¬ λ‚΄λ ¤κ°€κ³  μλ” μ„λ²„ λ©λ΅μ΄ λ‚νƒ€λ‚λ” κ²½μ°κ°€ μλ‹¤.

μ λ μΉ΄ λ””μ¤μ»¤λ²„λ¦¬ μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ™€ 30μ΄ λ™μ• 3λ² ν†µμ‹ ν• ν›„ ν—¬μ¤μ²΄ν¬λ¥Ό μΆ…λ£ν•κΈ° λ•λ¬Έμ—

κ°„ν—μ μΌλ΅ μ €λ ‡κ² λ‚μ¬ μ μμ§€λ§ κ²°κµ­ μλ™μΌλ΅ ν•΄κ²°λλ―€λ΅ κ±±μ •ν•μ§€ μ•μ•„λ„ λλ‹¤.

κ²μ΄νΈμ›¨μ΄λ¥Ό κ²½μ ν•μ—¬ port-checkλ¥Ό ν•΄λ³΄μ

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2Fe42ffdb6-132f-4eff-bd42-063a9c309041%2FUntitled.png?table=block&id=255629b6-2a27-4d8d-85b2-3ce2fa28c166&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1030&userId=&cache=v2)

![img](https://nohitnorun.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F93bcb278-6084-4807-9932-df65b17cb21a%2F8d7c4610-8039-42d5-8118-04aa11e3ae69%2FUntitled.png?table=block&id=a6216077-b5a0-4548-8c67-9ccc24a969a4&spaceId=93bcb278-6084-4807-9932-df65b17cb21a&width=1060&userId=&cache=v2)

μ„μ²λΌ ν¬νΈ λ²νΈλ¥Ό λ°”κΏ”κ°€λ©΄μ„ μ ‘μ†μ‹μΌμ£Όμ–΄ λ΅λ“ λ°Έλ°μ‹±μ΄ μΌμ–΄λ‚λ” κ²ƒμ„ λ³Ό μ μλ‹¤.
