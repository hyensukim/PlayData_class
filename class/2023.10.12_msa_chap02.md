# 2. μ¤ν”„λ§ ν΄λΌμ°λ“ κ²μ΄νΈμ›¨μ΄μ™€ κ²μ΄νΈμ›¨μ΄ μ„λ²„

## π‡ API Gatewayμ— λ€ν• μ΄ν•΄

MSAμ—μ„ ***API Gateway***λ” μ¤‘μ”ν• μ—­ν• μ„ ν•λ” μ»΄ν¬λ„νΈμ΄λ‹¤.

`API Gateway` :

 ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ ν†µμ‹ μ„ κ΄€λ¦¬ν•κ³  μ μ–΄ν•λ” μ—­ν• μ„ ν•λ‹¤. 

μ•„λλ” API Gatewayμ μ£Όμ” κΈ°λ¥κ³Ό μ΄μ μ— λ€ν• κ°„λµν• μ„¤λ…μ΄λ‹¤.

### **1. λΌμ°ν… (Routing)**

ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ μ ν• μ„λΉ„μ¤λ΅ `λΌμ°ν…(routing)` ν•΄μ¤€λ‹¤. μλ¥Ό λ“¤μ–΄, μ—¬λ¬ λ§μ΄ν¬λ΅μ„λΉ„μ¤κ°€ μλ” κ²½μ°, ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ²λ¦¬ν•κΈ°μ— μ μ ν• μ„λ²„λ΅ μ „λ‹¬ν•΄μ¤€λ‹¤.

### **2. λ΅λ“ λ°Έλ°μ‹± (Load Balancing)**

μ—¬λ¬ λ§μ΄ν¬λ΅μ„λΉ„μ¤κ°€ μμ„ λ•, API Gatewayλ” λ¶€ν• λ¶„μ‚°μ„ ν†µν•΄ μ”μ²­μ„ μ„λΉ„μ¤ λ‚΄ μ—¬λ¬ μΈμ¤ν„΄μ¤λ΅ λ¶„λ°°ν•λ‹¤. μ΄λ¥Ό ν†µν•΄ ν¨μ¨μ μΈ μμ› ν™μ©κ³Ό μ„±λ¥ ν–¥μƒμ„ μ΄λμ–΄λ‚Έλ‹¤.

### **3. μΈμ¦ λ° κ¶ν• λ¶€μ—¬ (Authentication and Authorization)**

API Gatewayλ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μΈμ¦ν•κ³  κ¶ν•μ„ ν™•μΈν•μ—¬, μ ν¨ν• μ”μ²­λ§μ„ μ„λ²„λ΅ μ „λ‹¬ν•λ‹¤. μ΄λ¥Ό ν†µν•΄ λ³΄μ•μ„ κ°•ν™”ν•κ³  λ¶λ²•μ μΈ μ•΅μ„Έμ¤λ¥Ό λ°©μ§€ν•λ‹¤.

### **4. μΊμ‹± (Caching)**

API Gatewayλ” μμ£Ό μ”μ²­λλ” λ°μ΄ν„°λ¥Ό μΊμ‹ λ©”λ¨λ¦¬μ— μ €μ¥ν•μ—¬(cashing) λΉ λ¥Έ μ‘λ‹µμ„ μ κ³µν•  μ μλ‹¤. μ΄λ¥Ό ν†µν•΄ μ„λΉ„μ¤μ μ‘λ‹µ μ‹κ°„μ„ μµμ ν™”ν•  μ μλ‹¤.

### **5. μ„λΉ„μ¤ μ§‘κ³„ (Service Aggregation)**

μ—¬λ¬ κ°μ MS μ„λ²„μ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ™€μ„ ν•λ‚μ μ‘λ‹µμΌλ΅ μ΅°ν•©ν•  μ μλ‹¤.

### **6. API λ³€ν™ (API Transformation)**

ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ΄λ‚ μ‘λ‹µμ ν•μ‹μ„ λ³€ν™ν•κ±°λ‚ μ΅°μ‘ν•  μ μλ‹¤. μλ¥Ό λ“¤μ–΄, JSON μ”μ²­μ„ XMLλ΅ λ³€ν™ν•κ±°λ‚ κ·Έ λ°λ€λ΅ λ³€ν™ν•  μ μλ‹¤.

### **7. μ¤λ¥ μ²λ¦¬ (Error Handling)**

API Gatewayλ” λ°±μ—”λ“ μ„λΉ„μ¤μ—μ„ λ°μƒν• μ¤λ¥λ¥Ό μ²λ¦¬ν•κ³  ν΄λΌμ΄μ–ΈνΈμ—κ² μ μ ν• μ¤λ¥ λ©”μ‹μ§€λ¥Ό μ „λ‹¬ν•λ‹¤.

### **8. μ„λΉ„μ¤ κ²€μƒ‰ λ° λ“±λ΅ (Service Discovery and Registration)**

API Gatewayλ” λ§μ΄ν¬λ΅μ„λΉ„μ¤κ°€ λ™μ μΌλ΅ ν™•μ¥λκ±°λ‚ μ¶•μ†λ  λ• μ΄λ¥Ό κ°μ§€ν•κ³ , μƒλ΅μ΄ μΈμ¤ν„΄μ¤λ¥Ό μλ™μΌλ΅ λ“±λ΅ν•κ±°λ‚ μ‚¬μ©ν•μ§€ μ•λ” μΈμ¤ν„΄μ¤λ¥Ό μ κ±°ν•λ‹¤.

### **μ”μ•½**

API Gatewayλ” MSAμ—μ„ μ¤‘μ”ν• μ—­ν• μ„ ν•λ” μ»΄ν¬λ„νΈλ΅, ν΄λΌμ΄μ–ΈνΈμ™€ λ‹¤μμ λ§μ΄ν¬λ΅μ„λΉ„μ¤ κ°„μ ν†µμ‹ μ„ κ΄€λ¦¬ν•κ³  μ μ–΄ν•λ‹¤. μ΄λ¥Ό ν†µν•΄ λ³΄μ•, μ„±λ¥, ν™•μ¥μ„± λ“± λ‹¤μ–‘ν• μ΄μ μ„ μ–»μ„ μ μλ‹¤.

## π‡ Spring Cloud Gatewayλ€?

**Spring Cloudμ μΌλ¶€λ΅ API κ²μ΄νΈμ›¨μ΄λ¥Ό λ§λ“¤κΈ° μ„ν• λΌμ΄λΈλ¬λ¦¬**μ΄λ‹¤.

μ΄λ¥Ό ν†µν•΄ λ‹¤μ–‘ν• κΈ°λ¥μ„ ν™μ©ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ™€ MS μ„λ²„κ°„μ ν†µμ‹ μ„ κ΄€λ¦¬ν•κ³  λ³΄μ•μ„ κ°•ν™”ν•  μ μλ‹¤.

### 1. λΌμ°ν…(Routing)

μ”μ²­λ κ²½λ΅μ— λ”°λΌ μ μ ν• μ„λΉ„μ¤λ΅ λΌμ°ν…ν•λ‹¤.

λ™μ μΌλ΅ μ„λΉ„μ¤λ¥Ό μ¶”κ°€ν•κ±°λ‚ μμ •μ΄ κ°€λ¥ν•λ‹¤.


### 2.  λ΅λ“ λ°Έλ°μ‹±(Load Balancing)

μ—¬λ¬ μΈμ¤ν„΄μ¤μ μ„λΉ„μ¤μ— μ”μ²­μ„ λ¶„μ‚°ν•μ—¬ λ¶€ν•λ¥Ό λ¶„λ‹΄ν•λ‹¤.

Ribbonκ³Ό ν•¨κ» μ‚¬μ©ν•μ—¬ λ°±μ—”λ“ μ„λΉ„μ¤μ— λ΅λ“ λ°Έλ°μ‹±μ„ μ μ©ν•  μ μλ‹¤.


### ν•„ν„°λ§ λ° μ „/ν›„ μ²λ¦¬(Filtering and Pre/Post Processing)

ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ΄λ‚ μ„λΉ„μ¤ μ‘λ‹µμ„ κ°€λ΅μ±„μ–΄ ν•„ν„°λ§ν•κ³  μμ •ν•  μ μλ‹¤.

ν•„ν„°λ¥Ό μ‚¬μ©ν•μ—¬ λ³΄μ• / λ΅κΉ… / μΈμ¦ λ“±μ„ μ μ©ν•  μ μλ‹¤.


### μ„λΉ„μ¤ κ°μ§€ λ° λ“±λ΅(Service Discovery and Registration)

Eurekaμ™€ ν•¨κ» μ‚¬μ©ν•μ—¬ λ™μ μΌλ΅ μ„λΉ„μ¤λ¥Ό κ°μ§€ν•κ³  λ“±λ΅ν•  μ μλ‹¤.


### μ„ν‚· λΈλ μ΄μ»¤(Circuit Breaker)

Hystrixμ™€ μ—°λ™ν•μ—¬ μ„λΉ„μ¤ κ°„μ ν†µμ‹ μ—μ„ λ°μƒν•λ” μ¥μ• λ¥Ό μ²λ¦¬ν•  μ μλ‹¤.


### ν΄λ°±(Fallback)

μ„λΉ„μ¤ νΈμ¶μ΄ μ‹¤ν¨ν•  κ²½μ° λ€μ²΄ μ‘λ‹µμ„ λ°ν™ν•  μ μλ‹¤.


### JWT λ° OAuth2 μ§€μ›(JWT and OAuth2 Support)

λ³΄μ•μ„ κ°•ν™”ν•κΈ° μ„ν• JWT λ° OAuth2 μΈμ¦μ„ μ§€μ›ν•λ‹¤.


### μΊμ‹±(Cashing)

μΊμ‹±μ„ ν†µν•΄ λ°λ³µμ μΈ μ”μ²­μ— λ€ν• μ‘λ‹µμ„ λΉ λ¥΄κ² λ°ν™ν•  μ μλ‹¤.
