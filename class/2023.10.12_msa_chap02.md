# 2. 스프링 클라우드 게이트웨이와 게이트웨이 서버

## 🎇 API Gateway에 대한 이해

MSA에서 ***API Gateway***는 중요한 역할을 하는 컴포넌트이다.

`API Gateway` :

 클라이언트와 서버 간의 통신을 관리하고 제어하는 역할을 한다. 

아래는 API Gateway의 주요 기능과 이점에 대한 간략한 설명이다.

### **1. 라우팅 (Routing)**

클라이언트의 요청을 적절한 서비스로 `라우팅(routing)` 해준다. 예를 들어, 여러 마이크로서비스가 있는 경우, 클라이언트의 요청을 처리하기에 적절한 서버로 전달해준다.

### **2. 로드 밸런싱 (Load Balancing)**

여러 마이크로서비스가 있을 때, API Gateway는 부하 분산을 통해 요청을 서비스 내 여러 인스턴스로 분배한다. 이를 통해 효율적인 자원 활용과 성능 향상을 이끌어낸다.

### **3. 인증 및 권한 부여 (Authentication and Authorization)**

API Gateway는 클라이언트의 요청을 인증하고 권한을 확인하여, 유효한 요청만을 서버로 전달한다. 이를 통해 보안을 강화하고 불법적인 액세스를 방지한다.

### **4. 캐싱 (Caching)**

API Gateway는 자주 요청되는 데이터를 캐시 메모리에 저장하여(cashing) 빠른 응답을 제공할 수 있다. 이를 통해 서비스의 응답 시간을 최적화할 수 있다.

### **5. 서비스 집계 (Service Aggregation)**

여러 개의 MS 서버에서 데이터를 가져와서 하나의 응답으로 조합할 수 있다.

### **6. API 변환 (API Transformation)**

클라이언트의 요청이나 응답의 형식을 변환하거나 조작할 수 있다. 예를 들어, JSON 요청을 XML로 변환하거나 그 반대로 변환할 수 있다.

### **7. 오류 처리 (Error Handling)**

API Gateway는 백엔드 서비스에서 발생한 오류를 처리하고 클라이언트에게 적절한 오류 메시지를 전달한다.

### **8. 서비스 검색 및 등록 (Service Discovery and Registration)**

API Gateway는 마이크로서비스가 동적으로 확장되거나 축소될 때 이를 감지하고, 새로운 인스턴스를 자동으로 등록하거나 사용하지 않는 인스턴스를 제거한다.

### **요약**

API Gateway는 MSA에서 중요한 역할을 하는 컴포넌트로, 클라이언트와 다수의 마이크로서비스 간의 통신을 관리하고 제어한다. 이를 통해 보안, 성능, 확장성 등 다양한 이점을 얻을 수 있다.

## 🎇 Spring Cloud Gateway란?

**Spring Cloud의 일부로 API 게이트웨이를 만들기 위한 라이브러리**이다.

이를 통해 다양한 기능을 활용하여 클라이언트와 MS 서버간의 통신을 관리하고 보안을 강화할 수 있다.

### 1. 라우팅(Routing)

요청된 경로에 따라 적절한 서비스로 라우팅한다.

동적으로 서비스를 추가하거나 수정이 가능하다.


### 2.  로드 밸런싱(Load Balancing)

여러 인스턴스의 서비스에 요청을 분산하여 부하를 분담한다.

Ribbon과 함께 사용하여 백엔드 서비스에 로드 밸런싱을 적용할 수 있다.


### 필터링 및 전/후 처리(Filtering and Pre/Post Processing)

클라이언트 요청이나 서비스 응답을 가로채어 필터링하고 수정할 수 있다.

필터를 사용하여 보안 / 로깅 / 인증 등을 적용할 수 있다.


### 서비스 감지 및 등록(Service Discovery and Registration)

Eureka와 함께 사용하여 동적으로 서비스를 감지하고 등록할 수 있다.


### 서킷 브레이커(Circuit Breaker)

Hystrix와 연동하여 서비스 간의 통신에서 발생하는 장애를 처리할 수 있다.


### 폴백(Fallback)

서비스 호출이 실패할 경우 대체 응답을 반환할 수 있다.


### JWT 및 OAuth2 지원(JWT and OAuth2 Support)

보안을 강화하기 위한 JWT 및 OAuth2 인증을 지원한다.


### 캐싱(Cashing)

캐싱을 통해 반복적인 요청에 대한 응답을 빠르게 반환할 수 있다.
